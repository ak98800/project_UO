components:
- layout_properties: {slot: default}
  name: html_container
  properties: {format: restricted_html}
  type: RichText
container:
  properties:
    html: |
      <!-- Charger vis.js -->
      <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>

      <!-- Conteneur du graphe -->
      <div id="mynetwork" style="width: 100%; height: 600px; border: 1px solid #ccc; margin-top: 20px;"></div>

      <script>
        // Fonction accessible depuis Python via call_js()
        window.drawGraph = function(nodesData, edgesData) {
          console.log("üîÑ drawGraph called");
          const container = document.getElementById("mynetwork");
          if (!container) {
            console.error("‚ùå Container introuvable !");
            return;
          }

          const nodes = new vis.DataSet(nodesData);
          const edges = new vis.DataSet(edgesData);

          const options = {
            layout: {
              hierarchical: {
                enabled: true,
                direction: "UD"
              }
            },
            physics: false,
            edges: {
              arrows: "to",
              font: { align: "horizontal" }
            }
          };

          new vis.Network(container, { nodes, edges }, options);
          console.log("‚úÖ Graphe g√©n√©r√© dynamiquement !");
        };
      </script>
  type: HtmlTemplate
is_package: true
